<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400&display=swap" rel="stylesheet">
<title>Horn Login</title>
<style>
    body {
      background-color: #282c37;
      color: white;
      text-align: center;
    }
    .media {
      display: inline-block;
      width: 15%;
      margin: 5px;
    }
    .media img, .media video {
      max-width: 100%;
      max-height: 100%;
      cursor: pointer;
    }
    .status {
      background-color: #525a70;
      border-radius: 15px;
      padding: 10px;
      margin-bottom: 10px;
    }
    svg {
    filter: invert(100%) sepia(100%) saturate(0%) hue-rotate(346deg) brightness(101%) contrast(104%);
  }
    .favcount {
      display: flex;
}
body {
font-family: 'Poppins', sans-serif;
}
button {
background-color: #595aff;
color: white;
border: none;
border-radius: 5px;
}
input {
border-radius: 5px;
border: none;
}

</style>

<p>Instance <input id="instance" type="text"></p>

<p>Email <input id="email" type="email"></p>
<p>Password <input id="password" type="password"></p>
<button onclick="toot()">Login</button>
<p id="estatus"></p>

<script>
function toot() {
var instance = document.getElementById("instance").value
var email = document.getElementById("email").value
var password = document.getElementById("password").value
document.getElementById("estatus").innerHTML = "Logging in.."
fetch("https://" + instance + "/oauth/token", {
  body: "client_id=bKbzHX2Hj1o0tx_EbsNZ8laBxEVdxt3o-O_yIIzcgTc&client_secret=zhEDkkMKQt0lOeOE_mpxOj6dJJDksMg2XPSi-s9ZKWs&grant_type=password&username=" + email + "&password=" + password + "&scope=read+write+push",
  headers: {
    "Content-Type": "application/x-www-form-urlencoded"
  },
  method: "POST"
}).then(response => response.json()).then(data => {
    if (data.access_token.length === 43) {
      window.location.replace("home?inst=" + instance + "&token=" + data.access_token);

    }
    else {
      document.getElementById("estatus").innerHTML = "not"
    }
  })
}
</script>
